// Code generated by Wire. DO NOT EDIT.

//go:generate wire
//+build !wireinject

package main

import (
	"github.com/sirupsen/logrus"
	"gitlab.com/verygoodsoftwarenotvirus/todo/auth"
	"gitlab.com/verygoodsoftwarenotvirus/todo/database/v1"
	"gitlab.com/verygoodsoftwarenotvirus/todo/database/v1/sqlite"
	"gitlab.com/verygoodsoftwarenotvirus/todo/server/v1"
	"gitlab.com/verygoodsoftwarenotvirus/todo/services/v1/items"
	"gitlab.com/verygoodsoftwarenotvirus/todo/services/v1/users"
)

// Injectors from wire.go:

func BuildServer(connectionDetails database.ConnectionDetails, SchemaDirectory database.SchemaDirectory, CertPair server.CertPair, CookieName users.CookieName, CookieSecret []byte, Debug bool) (*server.Server, error) {
	logger := logrus.New()
	databaseDatabase, err := sqlite.ProvideSqlite(Debug, logger, connectionDetails)
	if err != nil {
		return nil, err
	}
	enticator := auth.NewBcrypt(logger)
	tracer := provideJaeger()
	usernameFetcher := server.ProvideUsernameFetcher()
	usersService := users.ProvideUsersService(CookieName, logger, databaseDatabase, enticator, usernameFetcher)
	userIDFetcher := server.ProvideUserIDFetcher()
	itemsService := items.ProvideItemsService(logger, databaseDatabase, userIDFetcher)
	serverServer, err := server.ProvideServer(databaseDatabase, logger, enticator, SchemaDirectory, CertPair, CookieSecret, tracer, Debug, usersService, itemsService)
	if err != nil {
		return nil, err
	}
	return serverServer, nil
}
